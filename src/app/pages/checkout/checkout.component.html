<div class="container my-5">
  <div class="row">
    <div class="col-md-8 offset-md-2">
      <h2>Finalizar Compra</h2>
      <p>Por favor, preencha seus dados para concluir o pedido.</p>

      <form [formGroup]="checkoutForm" (ngSubmit)="onSubmit()">
        <h5>Dados Pessoais</h5>
        <div class="mb-3">
          <label for="nomeCompleto" class="form-label">Nome Completo</label>
          <input type="text" id="nomeCompleto" class="form-control" formControlName="nomeCompleto">
          @if (nomeCompleto?.invalid && (nomeCompleto?.dirty || nomeCompleto?.touched)) {
            <div class="text-danger mt-1"><small>O nome completo é obrigatório.</small></div>
          }
        </div>
        <div class="mb-3">
          <label for="email" class="form-label">E-mail</label>
          <input type="email" id="email" class="form-control" formControlName="email">
           @if (email?.invalid && (email?.dirty || email?.touched)) {
            <div class="text-danger mt-1"><small>Por favor, insira um e-mail válido.</small></div>
          }
        </div>

        <hr class="my-4">

        <h5>Endereço de Entrega</h5>
        <div class="row">
          <div class="col-md-4 mb-3">
            <label for="cep" class="form-label">CEP</label>
            <div class="input-group">
              <input type="text" id="cep" class="form-control" formControlName="cep" placeholder="00000-000">
              @if (buscandoCep) {
                <span class="input-group-text">
                  <div class="spinner-border spinner-border-sm" role="status"></div>
                </span>
              }
            </div>
             @if (cep?.invalid && (cep?.dirty || cep?.touched)) {
              <div class="text-danger mt-1"><small>CEP inválido.</small></div>
            }
          </div>
        </div>
        <div class="mb-3">
          <label for="rua" class="form-label">Rua</label>
          <input type="text" id="rua" class="form-control" formControlName="rua">
        </div>
        <div class="row">
          <div class="col-md-4 mb-3">
            <label for="numero" class="form-label">Número</label>
            <input type="text" id="numero" class="form-control" formControlName="numero">
          </div>
          <div class="col-md-8 mb-3">
            <label for="complemento" class="form-label">Complemento <small>(Opcional)</small></label>
            <input type="text" id="complemento" class="form-control" formControlName="complemento">
          </div>
        </div>
         <div class="mb-3">
          <label for="bairro" class="form-label">Bairro</label>
          <input type="text" id="bairro" class="form-control" formControlName="bairro">
        </div>
        <div class="row">
          <div class="col-md-8 mb-3">
            <label for="cidade" class="form-label">Cidade</label>
            <input type="text" id="cidade" class="form-control" formControlName="cidade">
          </div>
          <div class="col-md-4 mb-3">
            <label for="estado" class="form-label">Estado</label>
            <input type="text" id="estado" class="form-control" formControlName="estado">
          </div>
        </div>

        <button type="submit" class="btn btn-primary w-100 mt-3" [disabled]="checkoutForm.invalid">
          Finalizar Compra
        </button>
      </form>
    </div>
  </div>
</div>
