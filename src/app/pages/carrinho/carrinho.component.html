<div class="container my-5">
  <h2>Meu Carrinho</h2>

  @if (itensCarrinho$ | async; as itens) {

    @if (itens.length === 0) {
      <div class="alert alert-info mt-4">
        <p>Seu carrinho est√° vazio.</p>
        <a routerLink="/" class="btn btn-primary">Voltar para a loja</a>
      </div>
    } @else {

      <div class="row mt-4">
        <div class="col-md-8">
          <ul class="list-group">
            @for (item of itens; track item.id) {
              <li class="list-group-item d-flex justify-content-between align-items-center">
                <div class="d-flex align-items-center">
                  <img [src]="item.thumbnail" [alt]="item.title" width="50" class="me-3 rounded">
                  <span>{{ item.title }}</span>
                </div>
                <div class="d-flex align-items-center">
                  <span class="me-4 fw-bold">
                    {{ item.price | precoComDesconto:item.discountPercentage | currency:'BRL' }}
                  </span>
                  <button class="btn btn-outline-danger btn-sm" (click)="removerItem(item.id)">
                    <i class="bi-trash-fill"></i>
                  </button>
                </div>
              </li>
            }
          </ul>
        </div>

        <div class="col-md-4">
          <div class="card">
            <div class="card-body">
              <h5 class="card-title">Resumo do Pedido</h5>
              <hr>
              <div class="d-flex justify-content-between">
                <span>Subtotal ({{ itens.length }} itens)</span>
                <strong>{{ calcularTotal(itens) | currency:'BRL' }}</strong>
              </div>
              <a routerLink="/checkout" class="btn btn-primary w-100 mt-3">Ir para o Checkout</a>
            </div>
          </div>
        </div>
      </div>
    }
  }
</div>
